# dynamic_cast

_dynamic_cast_ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç _static_cast_ –¥–µ–ª–∞–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è, –∞ –Ω–µ –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –¢–æ –µ—Å—Ç—å –µ—Å–ª–∏ _dynamic_cast_ –Ω–µ —Å–º–æ–∂–µ—Ç —Å–∫–∞—Å—Ç–æ–≤–∞—Ç—å, —Ç–æ –º—ã –ø–æ–ª—É—á–∏–º RE. 
+ –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Å—Å—ã–ª–∫–∞–º–∏ –∏ —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏.

```cpp
#include <iostream>

struct Base {
	int x = 0;
	virtual void f() {}
	virtual ~Base() = default;
}

struct Derived : Base {
	int y = 0;
	void f() override {}
}

int main() {
	Derived d;
	Base& bref = d;
	Derived* dptr = dynamic_cast<Derived*>(bref); // –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ dynamic_cast
	if (dptr != nullptr) {
		std::cout << "Under brief lies real Derived!\n";
	}
}
```

–ï—Å–ª–∏ –ø–æ–¥ —Ç–µ–º, —á—Ç–æ –ª–µ–∂–∏—Ç –≤ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–º –≤ _dynamic_cast_ —Ä–µ–∞–ª—å–Ω–æ –∫–∞—Å—Ç—É–µ—Ç—Å—è, –∫ —É–∫–∞–∑–∞—Ç–µ–ª—é, —Ç–æ –≤—Å—ë –æ–∫. –ò–Ω–∞—á–µ –±—É–¥–µ—Ç nullptr. –ï—Å–ª–∏ –∂–µ —Ç–æ, —á—Ç–æ –ª–µ–∂–∏—Ç —Ä–µ–∞–ª—å–Ω–æ –∫–∞—Å—Ç—É–µ—Ç—Å—è –∫ —Å—Å—ã–ª–∫–µ, —Ç–æ –≤—Å—ë –æ–∫, –∏–Ω–∞—á–µ –±—É–¥–µ—Ç `std::bad_cast`

–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏. –ò–±–æ —Ç–æ–ª—å–∫–æ —É –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤ runtime –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å —á—Ç–æ —ç—Ç–æ –∑–∞ –∫–ª–∞—Å—Å. –ü–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ—Ç —Ç–∏–ø –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –¥–µ–ª–∞–µ–º _dynamic_cast_, –∞ –Ω–µ –∫ –∫–æ—Ç–æ—Ä–æ–º—É.

–°–æ–≤–µ—Ç—ã:
+ –¥–µ–ª–∞–µ–º _dynamic_cast_ –ø—Ä–∏ –Ω–∏—Å—Ö–æ–¥—è—â–µ–º –∏–ª–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º –∫–∞—Å—Ç–µ
+ _dynamic_cast_ –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –≤–æ—Å—Ö–æ–¥—è—â–µ–º –∫–∞—Å—Ç–µ.

–í–∞–∂–Ω—ã–µ —É—Ç–æ—á–Ω–µ–Ω–∏—è:

+ –í—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å _dynamic_cast_ –∫ `void*`
+ –û—Ç –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞ –∫ —Ä–æ–¥–∏—Ç–µ–ª—é –í–°–ï–ì–î–ê –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å _dynamic_cast_ –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–∏–ø –Ω–µ –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–π. 
+ _dynamic_cast_ —É–º–µ–µ—Ç –∫–∞—Å—Ç–æ–≤–∞—Ç—å –≤–±–æ–∫. –û—Ç –º–∞–º—ã –∫ –ø–∞–ø–µ. 
+ –ï—Å–ª–∏ –Ω–µ—Ç –Ω—É–∂–¥—ã –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö, –Ω–æ –≤—Å—ë –∂–µ —Ö–æ—á–µ—Ç—Å—è, —á—Ç–æ–±—ã —Ç–∏–ø –±—ã–ª –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–º, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º. 
+ _static_cast_ –ø—Ä–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω–∏–∑, –∞ _dynamic_cast_ —Ä–∞–±–æ—Ç–∞–µ—Ç.
# RTTIüíÄ 

_RTTI_ - Run-time type information

–¢–∞–±–ª–∏—Ü–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Ö—Ä–∞–Ω–∏—Ç –≤ —Å–µ–±–µ –∞–¥—Ä–µ—Å–∞ –≤—Å–µ—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∫–ª–∞—Å—Å–∞, –∞ —Ç–∞–∫–∂–µ –≤—Å–µ—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞*.

\*RTTI - type_id, type_info, offset_to_top..

# –û–ø–µ—Ä–∞—Ç–æ—Ä typeid

–û–ø–µ—Ä–∞—Ç–æ—Ä typeid –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `std::type_info`. `std::type_info` –∏–º–µ–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è(–∏ –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–∞), –∞ —Ç–∞–∫ –∂–µ –º–µ—Ç–æ–¥ `name()`. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "–º–∞–Ω–¥–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ"(mangling) –∏–º—è. –î–ª—è `int` —ç—Ç–æ `i`. –î–ª—è —Å–≤–æ–∏—Ö —Ç–∏–ø–æ–≤ —ç—Ç–æ –¥–ª–∏–Ω–Ω–∞ –∏–º–µ–Ω–∏ —Ç–∏–ø–∞ + –∏–º—è —Ç–∏–ø–∞(–¥–ª—è `class C` —ç—Ç–æ `1C`).

