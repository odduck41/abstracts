+ _–¢–∞–±–ª–∏—Ü–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π_ - —ç—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ - –º–µ—Ö–∞–Ω–∏–∑–º, –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤ —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–∑–¥–Ω–µ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ.
+ –Ø–≤–ª—è–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —è–∑—ã–∫–∞, –º—ã –æ–±—ã—á–Ω–æ –Ω–µ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∫ –Ω–µ–π –¥–æ—Å—Ç—É–ø –∏–ª–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –µ–π.
+ –í –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞—Ö Visual Studio –Ω–∞–∑—ã–≤–∞–µ—Ç _\_\_vfptr_ - —É–∫–∞–∑–∞—Ç–µ–ª—å. _vftable_ - —Å–∞–º–∞ —Ç–∞–±–ª–∏—Ü–∞. –í –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ _vptr_ –∏–ª–∏ _vtable_.
```cpp
#include <iostream>
struct Empty {};

struct EmptyVirt {
¬† ¬† virtual ~EmptyVirt();
};

struct NotEmpty {
¬† ¬† int e;
};

struct NotEmptyVirt {
¬† ¬† int e;
¬† ¬† virtual ~NotEmptyVirt();
};

struct NotEmptyNonVirt {
¬† ¬† void foo() const {};
¬† ¬† int e;
};

int main() {
¬† ¬† std::cout << "Empty\t" << sizeof(Empty) << std::endl; // 1
¬† ¬† std::cout << "EmptyVirt\t" << sizeof(EmptyVirt) << std::endl; // 8
¬† ¬† std::cout << "NotEmpty\t" << sizeof(NotEmpty) << std::endl; // 4
¬† ¬† std::cout << "NotEmptyVirt\t" << sizeof(NotEmptyVirt) << std::endl; // 16
¬† ¬† std::cout << "NotEmptyNonVirt\t" << sizeof(NotEmptyNonVirt) << std::endl; // 4
¬† ¬† std::cout << "void*\t" << sizeof(void*) << std::endl; // 8
¬† ¬† std::cout << "int\t" << sizeof(int) << std::endl; // 4
}
```
[—Ç—ã–∫](https://godbolt.org/z/br6a9h6aM)

+ –≠—Ç–æ –ø–ª–æ—Ö–æ –≤–∏–¥–Ω–æ –Ω–∞ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ, –≤–µ–¥—å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤—Å—ë –ø–æ–¥ –º–∞—à–∏–Ω–Ω–æ–µ —Å–ª–æ–≤–æ, –Ω–æ –ø–æ –∏–¥–µ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –∫–ª–∞—Å—Å—É `sizeof(void*)`.
+ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Ä–∞–∑–º–µ—Ä –∫–ª–∞—Å—Å–∞ –Ω–µ –≤–ª–∏—è–µ—Ç


# RTTIüíÄ

–¢–∞–±–ª–∏—Ü–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Ö—Ä–∞–Ω–∏—Ç –≤ —Å–µ–±–µ –∞–¥—Ä–µ—Å–∞ –≤—Å–µ—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∫–ª–∞—Å—Å–∞, –∞ —Ç–∞–∫–∂–µ –≤—Å–µ—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞*.

\*RTTI - type_id, type_info, offset_to_top..

–£ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π. –û–±—ä–µ–∫—Ç—ã –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç *—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ç–∞–±–ª–∏—Ü—É*, –∞ –Ω–µ —Å–∞–º—É —Ç–∞–±–ª–∏—Ü—É.

vtable —ç—Ç–æ –±—É–∫–≤–∞–ª—å–Ω–æ —Ç–∞–±–ª–∏—Ü–∞. –ü–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–∏–∫ —ç—Ç–æ —Å–º–µ—â–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –≤—Ç–æ—Ä–æ–π —Å—Ç–æ–ª–±–∏–∫ - –∞–¥—Ä–µ—Å —Ñ—É–Ω–∫—Ü–∏–∏.

+ –û–±—ã—á–Ω–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∫–ª–∞–¥—ë—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å vptr –ø–µ—Ä–≤—ã–º —Å–∫—Ä—ã—Ç—ã–º –ø–æ–ª–µ–º –∫–ª–∞—Å—Å–∞.
+ –ö–æ–≥–¥–∞ –¥–µ–ª–∞–µ—Ç—Å—è –≤—ã–∑–æ–≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏–¥—ë–º –ø–æ vptr, –ø–æ —Å–¥–≤–∏–≥—É –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Ç–æ–¥ –∏ –¥–µ–ª–∞–µ–º call.

![[vtable.png]]